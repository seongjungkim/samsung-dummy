var _orderData=[];var toCancelData;
var orderPay={calTotalAmt:function(type,couponDcAmt){var goodsTotalAmt=parseInt($("#order_payment_total_goods_amt").val());var dlvrTotalAmt=parseInt($("#order_payment_total_dlvr_amt").val());var fnSprtAmt=parseInt($("#totalFnSprtAmt").val());var dcTotalAmt=0;var svmnTotalAmt=0;var fpntTotalAmt=0;var spntTotalAmt=0;var apntTotalAmt=0;var mpntTotalAmt=0;var wpntTotalAmt=0;var timeDlvrTotalAmt=$.isNumeric($("#order_payment_total_time_dlvr_amt").val())?parseInt($("#order_payment_total_time_dlvr_amt").val()):0;
var totalMembershipPoint=0;dcTotalAmt=parseInt($("#order_payment_total_dc_amt").val());if(orderCommon.mbrNo!=orderCommon.CONST_NO_MEMBER_NO){svmnTotalAmt=$.isNumeric($("#order_payment_dc_svmn_use_amt").val())?parseInt($("#order_payment_dc_svmn_use_amt").val()):0;fpntTotalAmt=$("#order_payment_total_fpnt_amt").length>0?parseInt($("#order_payment_total_fpnt_amt").val()):0;spntTotalAmt=$("#order_payment_total_spnt_amt").length>0?parseInt($("#order_payment_total_spnt_amt").val()):0;apntTotalAmt=$("#order_payment_total_apnt_amt").length>
0?parseInt($("#order_payment_total_apnt_amt").val()):0;mpntTotalAmt=$("#order_payment_total_mpnt_amt").length>0?parseInt($("#order_payment_total_mpnt_amt").val()):0;wpntTotalAmt=$("#order_payment_total_wpnt_amt").length>0?parseInt($("#order_payment_total_wpnt_amt").val()):0;totalMembershipPoint=$("#order_payment_dc_svmn_use_amt").length>0?parseInt($("#order_payment_dc_svmn_use_amt").val()):0}var totalFnetPoint=fpntTotalAmt+spntTotalAmt+apntTotalAmt+mpntTotalAmt+wpntTotalAmt;if(orderCommon.stGbCd==
"30")fnSprtAmt=0;var payTotalAmt=goodsTotalAmt+dlvrTotalAmt-dcTotalAmt-totalFnetPoint-fnSprtAmt-totalMembershipPoint+timeDlvrTotalAmt;console.log("## payTotalAmt = "+payTotalAmt);console.log("## totalFnetPoint="+totalFnetPoint);console.log("## fnSprtAmt="+fnSprtAmt);$("#mbl_order_payment_total_goods_amt_view").text(isNaN(goodsTotalAmt)?0:format.num(goodsTotalAmt));$("#mbl_order_total_dc_point_view").text(isNaN(dcTotalAmt+svmnTotalAmt+fnSprtAmt)?0:format.num(dcTotalAmt+svmnTotalAmt+fnSprtAmt));$("#order_payment_total_pay_amt_view").val(payTotalAmt.toString().replace(/\B(?=(\d{3})+(?!\d))/g,
","));$("#order_payment_total_fn_sprt_amt_view").val(fnSprtAmt.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","));if(orderCommon.stGbCd=="30")$("#order_payment_total_return_amt_view").html(fnSprtAmt.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","));if(orderCommon.mbrNo!=orderCommon.CONST_NO_MEMBER_NO&&$("input[name=rglrDlvrYn]").val()!="Y")if(payTotalAmt<0&&(svmnTotalAmt>0||fpntTotalAmt>0||spntTotalAmt>0||apntTotalAmt>0||mpntTotalAmt>0||wpntTotalAmt>0)){if(svmnTotalAmt>0)$("#order_payment_dc_svmn_use_amt").val("0");
if(fpntTotalAmt>0)$("#pointUseType"+$("#svmnUseTypeCd").val()).find("input[name=fndDayPntInfos]").each(function(index,item){var initFndDayPntInfos=$(this).val().split("|")[0]+"|0";$(this).val(initFndDayPntInfos)});if(spntTotalAmt>0)$("#pointUseType"+$("#svmnUseTypeCd").val()).find("input[name=spclPntInfos]").each(function(index,item){var initSpclPntInfos=$(this).val().split("|")[0]+"|0";$(this).val(initSpclPntInfos)});if(apntTotalAmt>0)$("#pointUseType"+$("#svmnUseTypeCd").val()).find("input[name=awrdPntInfos]").each(function(index,
item){var initAwrdPntInfos=$(this).val().split("|")[0]+"|0";$(this).val(initAwrdPntInfos)});if(mpntTotalAmt>0)$("#pointUseType"+$("#svmnUseTypeCd").val()).find("input[name=moscPntInfos]").each(function(index,item){var initMoscPntInfos=$(this).val().split("|")[0]+"|0";$(this).val(initMoscPntInfos)});if(wpntTotalAmt>0)$("#pointUseType"+$("#svmnUseTypeCd").val()).find("input[name=welfarePntInfos]").each(function(index,item){var initWelfarePntInfos=$(this).val().split("|")[0]+"|0";$(this).val(initWelfarePntInfos)});
orderDc.calSvmnAmt();return}if(type!=undefined&&type=="goodsCoupon"){$("#order_payment_total_pay_amt").val(payTotalAmt);if($("input[name=rglrDlvrYn]").val()!="Y");}else{$("#order_payment_total_pay_amt_view").text(format.num(payTotalAmt));$("#order_payment_total_pay_amt_final_view").text(format.num(payTotalAmt));$("#order_payment_total_pay_amt").val(payTotalAmt)}if(orderCommon.ST_GB_10===orderCommon.stGbCd||orderCommon.ST_GB_50===orderCommon.stGbCd||"200"===orderCommon.stId||"122"===orderCommon.stId)if($("#order_payment_total_pay_amt").val()!==
undefined&&$("#order_payment_total_pay_amt").val()!=="")orderPayBenefit.getPayBenefitInfo(payTotalAmt);else $("#payBenefitUl").hide()},valid:function(){var payMeansCd=$("#payMeansCd").val();var payAmt=parseInt($("#order_payment_total_pay_amt").val());if(payAmt<=0){commonAlert({title:"alert",content:"寃곗젣湲덉븸�� �뺤씤�� 二쇱꽭��."});openLayer("commonAlert");return false}if($("input[name=rglrDlvrYn]").val()=="Y"){if($("input[name=rglrDlvrCycl]").val()==""){commonAlert({title:"alert",content:"諛곗넚二쇨린瑜� �좏깮�� 二쇱꽭��."});openLayer("commonAlert");
$("input[name=rglrDlvrCycl]").focus();return false}var rglrPayDay=$("input[name=rglrPayDay]").val();if(rglrPayDay==""||rglrPayDay==undefined){commonAlert({title:"alert",content:"諛곗넚�쇱옄瑜� 湲곗옱�� 二쇱꽭��."});openLayer("commonAlert");$("input[name=rglrPayDay]").focus();return false}var today=new Date;var toDate=today.getDate()<10?"0"+today.getDate():today.getDate();var rglrPayDate=rglrPayDay.substring(rglrPayDay.length,rglrPayDay.length-2);if(rglrPayDate==toDate){commonAlert({title:"alert",content:"�뱀씪 �뺢린 諛곗넚二쇰Ц�� �듭씪 寃곗젣遺��� �곸슜�� 媛��ν빀�덈떎."});
openLayer("commonAlert");$("input[name=rglrPayDay]").focus();return false}}if((payMeansCd==""||payMeansCd==undefined)&&payAmt>0){commonAlert({title:"alert",content:"寃곗젣�섎떒�� �좏깮�� 二쇱꽭��."});openLayer("commonAlert");return false}if(payMeansCd==orderCommon.CONST_PAY_MEANS_110&&$("input[name=rglrDlvrYn]").val()!="Y"){if($(".credit-add").css("display")=="none"){if($("#mobilCardCode").val()==""){commonAlert({title:"alert",content:"�좎슜移대뱶瑜� �좏깮�� 二쇱꽭��."});openLayer("commonAlert");return false}}else if(!$(".credit-add").find(".droplist-button").hasClass("selected")){commonAlert({title:"alert",
content:"�좎슜移대뱶瑜� �좏깮�� 二쇱꽭��."});openLayer("commonAlert");return false}if($("#mobilCardCode").val()!=""&&$("#mobilCardCode").val()!=undefined){if(parseInt($("#order_payment_total_pay_amt").val())>0&&$("#installmentMonth").val()==""){commonAlert({title:"alert",content:"�좊�湲곌컙�� 泥댄겕�� 二쇱꽭��."});openLayer("commonAlert");return false}if(parseInt($("#order_payment_total_pay_amt").val())>0&&parseInt($("#order_payment_total_pay_amt").val())<5E4&&$("#installmentMonth").val()!="00"){commonAlert({title:"alert",content:"�쇱떆遺덈쭔 媛��ν빀�덈떎."});
openLayer("commonAlert");return false}}}if(payMeansCd=="easypay"&&$("#mobilCardCode").val()==""){commonAlert({title:"alert",content:"媛꾪렪寃곗젣�щ� �좏깮�� 二쇱꽭��."});openLayer("commonAlert");return false}if(payMeansCd==orderCommon.CONST_PAY_MEANS_130)if(!$("#agree_escro01").is(":checked")){commonAlert({title:"alert",content:"援щℓ�덉쟾 �먯뒪�щ줈 �ъ슜 �숈쓽�� 二쇱꽭��."});openLayer("commonAlert");return false}if(payMeansCd==orderCommon.CONST_PAY_MEANS_140)if(!$("#agree_escro02").is(":checked")){commonAlert({title:"alert",content:"援щℓ�덉쟾 �먯뒪�щ줈 �ъ슜 �숈쓽�� 二쇱꽭��."});
openLayer("commonAlert");return false}if(payMeansCd==orderCommon.CONST_PAY_MEANS_140||payMeansCd==orderCommon.CONST_PAY_MEANS_130||payMeansCd==orderCommon.CONST_PAY_MEANS_150){var useGbCd=$("input:radio[name=useGbCd]:checked").val();if(useGbCd==orderCommon.CONST_CASH_USE_GB_10){if($("#order_payment_doc_isu_means_no_phn").val()==""){$("#order_payment_doc_isu_means_no_phn").focus();return false}if(!valid.mobile.test($("#order_payment_doc_isu_means_no_phn").val())){$("#order_payment_doc_isu_means_no_phn").focus();
return false}}if(useGbCd==orderCommon.CONST_CASH_USE_GB_20){if($("#order_payment_doc_isu_means_no_biz").val()==""){$("#order_payment_doc_isu_means_no_biz").focus();return false}if(!valid.bizNo.test($("#order_payment_doc_isu_means_no_biz").val())){$("#order_payment_doc_isu_means_no_biz").focus();return false}}}if(orderCommon.mbrNo==orderCommon.CONST_NO_MEMBER_NO);return true},getCardIstmInfo:function(){var chrgDcStrIdObj=$("input[name=goodsChrgDcStrId]")[0];var cardCode=$("#selectCardCode").val();
var payAmt=parseInt($("#order_payment_total_pay_amt").val());var sidIstmPrdObj=$("input[name=goodsSidIstmPrd]")[0];if(cardCode!=""&&cardCode!=undefined&&payAmt>=5E4){var options={url:orderCommon.stContextPath+"xhr/order/getCardIstmInfo",async:false,data:{cardCode:$("#selectCardCode").val(),chrgDcStrId:$(chrgDcStrIdObj).val(),sidIstmPr:$(sidIstmPrdObj).val()},done:function(data){orderPay.setCardIstmInfoData(data.cardIstmInfo,payAmt)}};ajax.call(options)}else orderPay.setCardIstmInfoData("",payAmt)},
setCardIstmInfoData:function(cardIstm,payAmt){var str="<li role='option' class='droplist-item focused' aria-selected='true' onclick='setInstallMentMonth(this, \"00\")'>�쇱떆遺�</li>";if(cardIstm!=""&&cardIstm!=undefined&&payAmt>=5E4){var istmPrdArr=cardIstm.istmPrd.split(",");var noItrstPrdArr=cardIstm.noItrstPrd.split(",");var noItrstStdAmt=parseInt(cardIstm.noItrstStdAmt);noItrstPrdArr=noItrstPrdArr.sort(function(a,b){return a-b});istmPrdArr=istmPrdArr.sort(function(a,b){return a-b});for(var i in istmPrdArr){var istmPrd=
istmPrdArr[i];var noItrstFlag=false;if(istmPrd!="1"){for(var n in noItrstPrdArr){var noItrstPrd=noItrstPrdArr[n];if(payAmt>=noItrstStdAmt&&istmPrd==noItrstPrd){var sidIstmPrdObj=$("input[name=goodsSidIstmPrd]")[0];var midTpCdObj=$("input[name=goodsMidTpCd]")[0];if($(sidIstmPrdObj).val()==""||$(midTpCdObj).val()==""){str+="<li role='option' class='droplist-item' onclick='setInstallMentMonth(this, \""+(noItrstPrd<10?"0"+noItrstPrd:noItrstPrd)+"\")'>"+noItrstPrd+"媛쒖썡(臾댁씠��)</li>";noItrstFlag=true}else if($(sidIstmPrdObj).val()==
noItrstPrd&&$(midTpCdObj).val()=="20"){str+="<li role='option' class='droplist-item' onclick='setInstallMentMonth(this, \""+(noItrstPrd<10?"0"+noItrstPrd:noItrstPrd)+"\")'>"+noItrstPrd+"媛쒖썡(臾댁씠��)</li>";noItrstFlag=true}else if($(sidIstmPrdObj).val()==noItrstPrd&&$(midTpCdObj).val()=="10")noItrstFlag=true;else{str+="<li role='option' class='droplist-item' onclick='setInstallMentMonth(this, \""+(noItrstPrd<10?"0"+noItrstPrd:noItrstPrd)+"\")'>"+noItrstPrd+"媛쒖썡(臾댁씠��)</li>";noItrstFlag=true}}}if(!noItrstFlag)str+=
"<li role='option' class='droplist-item' onclick='setInstallMentMonth(this, \""+(istmPrd<10?"0"+istmPrd:istmPrd)+"\")'>"+istmPrd+"媛쒖썡</li>"}}if(orderCommon.stGbCd=="10"&&cardIstm.cardcCd=="11")str+="<li role='option' class='droplist-item' aria-selected='true' onclick='setInstallMentMonth(this, \"24\")'>24媛쒖썡</li>";$("#installmentMonth").val("");if(orderCommon.stGbCd=="10")$("#dropOrderInstPlanBtn").html("�좊� 湲곌컙�� �좏깮�섏꽭��.");else $("#dropOrderInstPlanBtn").html("�좊� 湲곌컙�� �좏깮�댁＜�몄슂.")}else{$("#installmentMonth").val("00");
$("#dropOrderInstPlanBtn").html("�쇱떆遺�")}var dropOrderInstPlanBtn=$("#dropOrderInstPlanBtn").next();dropOrderInstPlanBtn.html(str)},payBtn:function(){if((orderCommon.stGbCd=="20"||orderCommon.stGbCd=="30"||orderCommon.stGbCd=="70"&&orderCommon.stId=="562")&&$("#fnetOrderAgree").val()=="N"){if($("#agreement-1").prop("checked")&&$("#agreement-2").prop("checked")&&$("#agreement-3").prop("checked")&&$("#agreement-5").prop("checked")){commonAlert({title:"alert",content:"二쇰Ц 諛� 媛쒖씤�뺣낫 �섏쭛 �꾩닔 �쎄���<br>�숈쓽�섏떆湲곗쟾 �⑤�由щ꽬 援щℓ�숈쓽瑜� �섏뀛�� �⑸땲�� \n �쎄��� 泥댄겕瑜� �몄떊�� 寃곗옱踰꾪듉�� �꾨Ⅴ�몄슂."});
openLayer("commonAlert");return false}openLayer("popupFmailyAgree");return false}else{var trdInYn=$("input[id = tradeInYn]").val();if(trdInYn=="Y"){if(!$("#agreement-1").prop("checked")||!$("#agreement-2").prop("checked")||!$("#agreement-3").prop("checked")||!$("#agreement-5").prop("checked")||!$("#agreement-9").prop("checked")||!$("#agreement-11").prop("checked")){var alertMsg="二쇰Ц 諛� 媛쒖씤�뺣낫 �섏쭛 �꾩닔 諛� 以묎퀬蹂댁긽 �댁슜�쎄���<br>�숈쓽�� 二쇱꽭��.";if(orderCommon.stGbCd=="20"||orderCommon.stGbCd=="30")alertMsg="二쇰Ц �곹뭹 �뺣낫 諛� 諛곗넚 �뺣낫瑜� �뺤씤�섍퀬<br>援щℓ�� �숈쓽�� 二쇱꽭��.";
commonAlert({title:"alert",content:alertMsg});openLayer("commonAlert");return false}}else if(!$("#agreement-1").prop("checked")||!$("#agreement-2").prop("checked")||!$("#agreement-3").prop("checked")||!$("#agreement-5").prop("checked")){var alertMsg="二쇰Ц 諛� 媛쒖씤�뺣낫 �섏쭛 �꾩닔 �쎄���<br>�숈쓽�� 二쇱꽭��.";if(orderCommon.stGbCd=="20"||orderCommon.stGbCd=="30")alertMsg="二쇰Ц �곹뭹 �뺣낫 諛� 諛곗넚 �뺣낫瑜� �뺤씤�섍퀬<br>援щℓ�� �숈쓽�� 二쇱꽭��.";commonAlert({title:"alert",content:alertMsg,callback:function(){$("#agreement-1").focus();$("#orderPaymentBtn").focus()}});
openLayer("commonAlert");return false}}var isArcn=false;var isDryer=false;var orderGoods=$("div.buy-target-goods");for(var i=0;i<orderGoods.length;i++){console.log(orderGoods[i]);var arcnYn=$(orderGoods[i]).attr("data-arcn-yn");if(arcnYn=="Y"){isArcn=true;break}var dryerYn=$(orderGoods[i]).attr("data-dryer-yn");if(dryerYn=="Y"){isDryer=true;break}}if(isArcn)if($("#arcnYn").val()!="Y"){openLayer("popupAirConditioner");return false}if(isDryer)if($("#dryerYn").val()!="Y"){openLayer("popupDryer");return false}if(!orderOrdr.valid()){commonAlert({title:"alert",
content:"二쇰Ц�� �뺣낫媛� �щ컮瑜댁� �딆뒿�덈떎."});openLayer("commonAlert");return false}if("1"==$("#dlvraType").val()){if($("input[name=extAdvVstYn]:checked").val()=="Y"&&$(".extra-service").find("input[name=extAdvVstDate]").val()==""){commonAlert({title:"alert",content:"�ъ쟾 諛⑸Ц�쇱쓣 �낅젰�� 二쇱꽭��."});openLayer("commonAlert");return false}else{var minDate=$(".extra-service").find("input[name=extAdvVstDate]").attr("min");var maxDate=$(".extra-service").find("input[name=extAdvVstDate]").attr("max");var advVstDate=$(".extra-service").find("input[name=extAdvVstDate]").val();
var dishwasherYn=$(".extra-service").find("input[name=dishwasherYn]").val();var noPerforationTVYn=$(".extra-service").find("input[name=noPerforationTVYn]").val();if(dishwasherYn!="Y"&&noPerforationTVYn!="Y")if(!orderPay.checkValidAdvVstDate(minDate,maxDate,advVstDate))return false}if($(".extra-service").find("input[name=extIstHopeDate]").length>0&&$(".extra-service").find("input[name=extIstHopeDate]").val()==""){if($(".extra-service").find("input[name=dlvrIstYn]").val()=="Y")commonAlert({title:"alert",
content:"�ㅼ튂 �щ쭩�쇱쓣 �낅젰�� 二쇱꽭��."});else commonAlert({title:"alert",content:"諛곗넚 �щ쭩�쇱쓣 �낅젰�� 二쇱꽭��."});openLayer("commonAlert");return false}else{var minDate=$(".extra-service").find("input[name=extIstHopeDate]").attr("min");var maxDate=$(".extra-service").find("input[name=extIstHopeDate]").attr("max");var advVstDate=$(".extra-service").find("input[name=extIstHopeDate]").val();var disableHopeDateString=$(".extra-service").find("input[name=extIstHopeDate]").data("disable-hope-day");var dlvrIstYn=$(".extra-service").find("input[name=dlvrIstYn]").val();
if(!orderPay.checkValidExtIstHopeDate(minDate,maxDate,advVstDate,disableHopeDateString,dlvrIstYn))return false}if($(".extra-service").find("input[name=extIstHopeDate]").val()<=$(".extra-service").find("input[name=extAdvVstDate]").val()&&(!($(".extra-service").find("input[name=extIstHopeDate]").data("goods-add-tp-cd")===20&&$(".extra-service").find("input[name=extIstHopeDate]").data("goods-add-tp-sub-cd")===10)&&$(".extra-service").find("input[name=dishwasherYn]").val()==="N")&&(!$(".extra-service").find("input[name=extIstHopeDate]").data("goods-add-tp-cd")==
90&&$(".extra-service").find("input[name=noPerforationTVYn]").val()==="N")){commonAlert({title:"alert",content:"�ъ쟾諛⑸Ц �좎쭨�� 諛곗넚�붿껌�쇰낫�� �대Ⅸ �좎쭨濡� �좏깮�댁＜�쒓린 諛붾엻�덈떎."});openLayer("commonAlert");$(".extra-service").find("input[name=extAdvVstDate]").val("");return false}}else{var extIstFlag=true;$.each($(".delivery-box"),function(){if($(this).find("input[name^=extAdvVstDate]").val()==""&&$(this).find("input[name^=extAdvVstYn]:checked").val()=="Y"){commonAlert({title:"alert",content:"�ъ쟾 諛⑸Ц�쇱쓣 �낅젰�� 二쇱꽭��."});openLayer("commonAlert");
extIstFlag=false;return false}else{var minDate=$(this).find("input[name^=extAdvVstDate]").attr("min");var maxDate=$(this).find("input[name^=extAdvVstDate]").attr("max");var advVstDate=$(this).find("input[name^=extAdvVstDate]").val();if(!orderPay.checkValidAdvVstDate(minDate,maxDate,advVstDate)){extIstFlag=false;return false}}return true});$.each($(".delivery-box"),function(){if($(this).find("input[name^=extIstHopeDate]").length>0&&$(this).find("input[name^=extIstHopeDate]").val()==""){if($(this).find("input[name^=dlvrIstYn]").val()==
"Y")commonAlert({title:"alert",content:"�ㅼ튂 �щ쭩�쇱쓣 �낅젰�� 二쇱꽭��."});else commonAlert({title:"alert",content:"諛곗넚 �щ쭩�쇱쓣 �낅젰�� 二쇱꽭��."});openLayer("commonAlert");extIstFlag=false;return false}else{var minDate=$(this).find("input[name^=extIstHopeDate]").attr("min");var maxDate=$(this).find("input[name^=extIstHopeDate]").attr("max");var advVstDate=$(this).find("input[name^=extIstHopeDate]").val();var disableHopeDateString=$(this).find("input[name^=extIstHopeDate]").data("disable-hope-day");var dlvrIstYn=$(this).find("input[name^=extIstHopeDate]").val();
if(!orderPay.checkValidExtIstHopeDate(minDate,maxDate,advVstDate,disableHopeDateString,dlvrIstYn)){extIstFlag=false;return false}if($(this).find("input[name=extIstHopeDate]").val()<=$(this).find("input[name=extAdvVstDate]").val()&&!($(this).find("input[name=extIstHopeDate]").data("goods-add-tp-cd")===20&&$(this).find("input[name=extIstHopeDate]").data("goods-add-tp-sub-cd")===10)){commonAlert({title:"alert",content:"�ъ쟾諛⑸Ц �좎쭨�� 諛곗넚�붿껌�쇰낫�� �대Ⅸ �좎쭨濡� �좏깮�댁＜�쒓린 諛붾엻�덈떎."});openLayer("commonAlert");$(this).find("input[name=extAdvVstDate]").val("");
extIstFlag=false;return false}}return true});if(!extIstFlag)return false}if(orderCommon.mbrNo!=orderCommon.CONST_NO_MEMBER_NO){if(!orderDc.validSvmn())return false;if(!orderDc.validFndDayPnt())return false;if(!orderDc.validSpclPnt())return false;if(!orderDc.validAwrdPnt())return false;if(!orderDc.validMoscPnt())return false}if(!this.valid())return false;if("Y"==localStorage.getItem("ing")){if(pgPopup!=null&&!pgPopup.closed)pgPopup.focus();commonAlert({title:"alert",content:"寃곗젣媛� 吏꾪뻾以묒엯�덈떎."});openLayer("commonAlert");
return false}var orderConfirmMsg="二쇰Ц�섏떆寃좎뒿�덇퉴?";if(orderCommon.stGbCd=="20"||orderCommon.stGbCd=="30"){var totalGoodsAmt=parseInt($("input[name=totalGoodsAmt]").val());var totalFnSprtAmt=parseInt($("input[name=totalFnSprtAmt]").val());if(totalFnSprtAmt>0&&totalFnSprtAmt<Math.ceil(totalGoodsAmt*.25))orderConfirmMsg="二쇰Ц �쒕룄 珥덇낵�낅땲��.\n 珥덇낵�섎뒗 湲덉븸�� 蹂몄씤 吏�遺덈줈\n 二쇰Ц�섏떆寃좎뒿�덇퉴?"}var confirmData={content:orderConfirmMsg,callback:function(){localStorage.setItem("ing","Y");orderPay.getOrderNo()}};commonConfirm(confirmData);
openLayer("commonConfirm");return true},checkValidAdvVstDate:function(minDate,maxDate,advVstDate){minDate=new Date(minDate);maxDate=new Date(maxDate);advVstDate=new Date(advVstDate);if(minDate.getTime()>advVstDate.getTime()||maxDate.getTime()<advVstDate.getTime()){commonAlert({title:"alert",content:"�ъ쟾 諛⑸Ц�쇱� "+minDate.dateFormat("yyyy-MM-dd")+"~"+maxDate.dateFormat("yyyy-MM-dd")+"<br/>�대궡濡� �좏깮 媛��� �⑸땲��."});openLayer("commonAlert");return false}return true},checkValidExtIstHopeDate:function(minDate,maxDate,
advVstDate,disableHopeDateString,dlvrIstYn){minDate=new Date(minDate);maxDate=new Date(maxDate);advVstDate=new Date(advVstDate);if(minDate.getTime()>advVstDate.getTime()||maxDate.getTime()<advVstDate.getTime()){if(dlvrIstYn=="Y")commonAlert({title:"alert",content:"�ㅼ튂 �щ쭩�쇱� "+minDate.dateFormat("yyyy-MM-dd")+"~"+maxDate.dateFormat("yyyy-MM-dd")+"<br/>�대궡濡� �좏깮 媛��� �⑸땲��."});else commonAlert({title:"alert",content:"諛곗넚 �щ쭩�쇱� "+minDate.dateFormat("yyyy-MM-dd")+"~"+maxDate.dateFormat("yyyy-MM-dd")+"<br/>�대궡濡� �좏깮 媛��� �⑸땲��."});
openLayer("commonAlert");return false}else if(disableHopeDateString!=null&&disableHopeDateString!=undefined){var disableHopeDateList=disableHopeDateString.split("|");if(disableHopeDateList.length>0)for(var i=0;i<disableHopeDateList.length;i++)if(advVstDate.dateFormat("yyyyMMdd")==disableHopeDateList[i]){if(dlvrIstYn=="Y")commonAlert({title:"alert",content:"�좏깮 遺덇��ν븳 �ㅼ튂 �щ쭩�� �낅땲��."});else commonAlert({title:"alert",content:"�좏깮 遺덇��ν븳 諛곗넚 �щ쭩�� �낅땲��."});openLayer("commonAlert");return false}}return true},getOrderDlvrInfo:function(){var _orderDlvrInfo=
[];var dlvraIndex=0;var orderCartInfo=[];var orderExtraInfo=[];console.log("orderPay.js getOrderNo dlvraType: "+$("#dlvraType").val());if("1"==$("#dlvraType").val()){$.each($(".order-m-area"),function(){$.each($(this).find(".buy-target-goods"),function(){var buyQty=$(this).find("input[name=buyQtyOrd]").val();if(buyQty>0)if(typeof _multi_goods_order=="undefined"){var goods={cartId:$(this).find("input[name=cartIds]").val(),buyQty:buyQty,dlvrCpNo:0,dlvrMbrCpNo:0,cpDcAmt:0,buyQtyOrd:buyQty};orderCartInfo.push(goods)}else for(var i=
0;i<buyQty;i++){var goods={cartId:$(this).find("input[name=cartIds]").val(),buyQty:1,dlvrCpNo:0,dlvrMbrCpNo:0,cpDcAmt:0,buyQtyOrd:buyQty};orderCartInfo.push(goods)}})});if($("#order-recieve-view").length>0){var extra={extIstHopeDate:"",extDoorDrct:"",extFrbDlvra:"",extAdvVstYn:"",extAdvVstDate:"",extGrbgPuYn:""};orderExtraInfo.push(extra);for(var i=0;i<orderCartInfo.length;i++){var orderCartInfoTmp=[];orderCartInfoTmp.push(orderCartInfo[i]);var dlvra={dlvraIndex:dlvraIndex,adrsNm:$("#order-recieve-nm").val(),
adrsMobile:$("#order-recieve-mobile").val(),adrsTel:$("#order-recieve-mobile").val(),postNoNew:"",roadAddr:"",roadDtlAddr:"",postNoOld:"",prclAddr:"",prclDtlAddr:"",dlvrMemo:"",localPostYn:"N",ordDlvrMtdCd:"20",cartInfoStr:JSON.stringify(orderCartInfoTmp),extraInfoStr:JSON.stringify(orderExtraInfo),pckStrNo:$("#plazaNo").val()};_orderDlvrInfo.push(dlvra)}}else if($("#order-store-rsv-view").length>0){var extra={extIstHopeDate:"",extDoorDrct:"",extFrbDlvra:"",extAdvVstYn:"",extAdvVstDate:"",extGrbgPuYn:""};
orderExtraInfo.push(extra);for(var i=0;i<orderCartInfo.length;i++){var orderCartInfoTmp=[];orderCartInfoTmp.push(orderCartInfo[i]);var dlvra={dlvraIndex:dlvraIndex,adrsNm:$("#order_payment_ordr_nm").val(),adrsMobile:$("#order_payment_ordr_mobile").val(),adrsTel:$("#order_payment_ordr_mobile").val(),postNoNew:"",roadAddr:"",roadDtlAddr:"",postNoOld:"",prclAddr:"",prclDtlAddr:"",dlvrMemo:"",localPostYn:"N",ordDlvrMtdCd:"50",cartInfoStr:JSON.stringify(orderCartInfoTmp),extraInfoStr:JSON.stringify(orderExtraInfo),
pckStrNo:$("#plazaNo").val()};_orderDlvrInfo.push(dlvra)}}else $.each($(".info-delivery-single"),function(){var extra={extIstHopeDate:$(".extra-service").find("input[name=extIstHopeDate]").val(),extDoorDrct:$(".extra-service").find("input[name=extDoorDrct]:checked").val(),extFrbDlvra:$(".extra-service").find("input[name=extFrbDlvra]:checked").val(),extAdvVstYn:$(".extra-service").find("input[name=extAdvVstYn]:checked").val(),extAdvVstDate:$(".extra-service").find("input[name=extAdvVstDate]").val(),
extGrbgPuYn:$(".extra-service").find("input[name=extGrbgPuYn]:checked").val()!=""&&$(".extra-service").find("input[name=extGrbgPuYn]:checked").val()!=undefined?$(".extra-service").find("input[name=extGrbgPuYn]:checked").val():"N",dsbRddListStr:$(".extra-service").find("input[name^=extIstHopeDate]").data("disableHopeDay"),istHopeTimeCd:$(".extra-service").find("input[name=istHopeTimeCd]").val(),timeDlvrGoodsId:$(".extra-service").find("input[name=timeDlvrGoodsId]").val(),dlvrQty:$(".extra-service").find("input[name=dlvrQty]").val()};
orderExtraInfo.push(extra);if($("input[name=rdoDeliveryMethod]").length>0&&$("input[name=rdoDeliveryMethod]").val()=="20")$(this).find("input[name=orderDeliveryMethod]").val("20");else if($("#deliveryTab5").hasClass("on"))$(this).find("input[name=orderDeliveryMethod]").val("30");var selDlvrMemo=$(this).find("input[name=odrDeliveryMsg]").is(":visible")?$(this).find("input[name=odrDeliveryMsg]").val():$(this).find("button[name=odrDeliveryMsg]").text();if(_ORDER_DELIVERY_DEFAULT_MSG==selDlvrMemo)selDlvrMemo=
"";var careplusTp=$("#carePlusTp").val();if(careplusTp!=undefined&&careplusTp!=""&&careplusTp=="I")selDlvrMemo=$(".careplusIDlvrArea").find("input[name=odrDeliveryMsg]").is(":visible")?$(".careplusIDlvrArea").find("input[name=odrDeliveryMsg]").val():$(".careplusIDlvrArea").find("button[name=odrDeliveryMsg]").text();if($("#delivery-tab-view5").css("display")!="none"&&$("#delivery-tab-view1").css("display")=="none"){var obj;$(".officePick").each(function(){if($(this).attr("aria-selected")=="selected")obj=
$(this)});var dlvra={dlvraIndex:dlvraIndex,adrsNm:$(obj).data("ordnm"),adrsMobile:$(obj).data("ordmobile"),adrsTel:$(obj).data("ordmobile"),postNoNew:$(obj).data("postnew"),roadAddr:$(obj).data("roadaddr"),roadDtlAddr:$(obj).data("roaddtladdr"),postNoOld:$(obj).data("postold"),prclAddr:$(obj).data("prcladdr"),prclDtlAddr:$(obj).data("prcldtladdr"),dlvrMemo:"",localPostYn:"N",ordDlvrMtdCd:$(this).find("input[name=orderDeliveryMethod]").val(),cartInfoStr:JSON.stringify(orderCartInfo),extraInfoStr:JSON.stringify(orderExtraInfo),
pckStrNo:$(obj).data("plazano")};_orderDlvrInfo.push(dlvra)}else if(typeof _multi_goods_order=="undefined"){var dlvra={dlvraIndex:dlvraIndex,adrsNm:$(this).find("input[name=adrsNm]").val(),adrsMobile:$(this).find("input[name=adrsMobile]").val(),adrsTel:$(this).find("input[name=adrsTel]").val(),postNoNew:$(this).find("input[name=postNoNew]").val(),roadAddr:$(this).find("input[name=roadAddr]").val(),roadDtlAddr:$(this).find("input[name=roadDtlAddr]").val(),postNoOld:$(this).find("input[name=postNoOld]").val(),
prclAddr:$(this).find("input[name=prclAddr]").val(),prclDtlAddr:$(this).find("input[name=prclDtlAddr]").val(),dlvrMemo:selDlvrMemo,localPostYn:$(this).find("input[name=localPostYn]").val(),ordDlvrMtdCd:$(this).find("input[name=orderDeliveryMethod]").val(),cartInfoStr:JSON.stringify(orderCartInfo),extraInfoStr:JSON.stringify(orderExtraInfo),rddSearchGoodsListStr:JSON.stringify(orderRdd.setRddSearchGoodsList($(".extra-service").find("input[name=extIstHopeDate]"))),timeDlvrYn:$("#timeDlvrYn").val()};
if(orderCommon.stGbCd=="10"){dlvra.mbrDlvraNo=$(this).find("input[name=dlvraNo]").val();dlvra.dlvrMsgNo=$(this).find("input[name=dlvrMsgNo]").val();if($(this).find("input[name=dlvrMsgNo]").val()=="07")dlvra.dlvrMsgEtc=selDlvrMemo;else dlvra.dlvrMsgEtc=""}_orderDlvrInfo.push(dlvra)}else for(var i=0;i<orderCartInfo.length;i++){var orderCartInfoTmp=[];orderCartInfoTmp.push(orderCartInfo[i]);var dlvra={dlvraIndex:dlvraIndex,adrsNm:$(this).find("input[name=adrsNm]").val(),adrsMobile:$(this).find("input[name=adrsMobile]").val(),
adrsTel:$(this).find("input[name=adrsTel]").val(),postNoNew:$(this).find("input[name=postNoNew]").val(),roadAddr:$(this).find("input[name=roadAddr]").val(),roadDtlAddr:$(this).find("input[name=roadDtlAddr]").val(),postNoOld:$(this).find("input[name=postNoOld]").val(),prclAddr:$(this).find("input[name=prclAddr]").val(),prclDtlAddr:$(this).find("input[name=prclDtlAddr]").val(),dlvrMemo:selDlvrMemo,localPostYn:$(this).find("input[name=localPostYn]").val(),ordDlvrMtdCd:$(this).find("input[name=orderDeliveryMethod]").val(),
cartInfoStr:JSON.stringify(orderCartInfoTmp),extraInfoStr:JSON.stringify(orderExtraInfo),rddSearchGoodsListStr:JSON.stringify(orderRdd.setRddSearchGoodsList($(".extra-service").find("input[name=extIstHopeDate]"))),timeDlvrYn:$("#timeDlvrYn").val()};if(orderCommon.stGbCd=="10"){dlvra.mbrDlvraNo=$(this).find("input[name=dlvraNo]").val();dlvra.dlvrMsgNo=$(this).find("input[name=dlvrMsgNo]").val();if($(this).find("input[name=dlvrMsgNo]").val()=="07")dlvra.dlvrMsgEtc=selDlvrMemo;else dlvra.dlvrMsgEtc=
""}_orderDlvrInfo.push(dlvra)}})}else $.each($(".delivery-box"),function(){orderCartInfo=[];orderExtraInfo=[];var arrMultiMemberAddr=$(this).find("input[name=arrMultiMemberAddr]").val().split(";");$.each($(this).find("input[name=multiCartIds]"),function(){var goods={cartId:$(this).val(),buyQty:1,dlvrCpNo:0,dlvrMbrCpNo:0,cpDcAmt:0,buyQtyOrd:$(this).attr("data-buy-qty")};orderCartInfo.push(goods)});var extra={extIstHopeDate:$(this).find("input[name^=extIstHopeDate]").val(),extAdvVstYn:$(this).find("input[name^=extAdvVstYn]:checked").val(),
extAdvVstDate:$(this).find("input[name^=extAdvVstDate]").val(),extGrbgPuYn:$(this).find("input[name^=extGrbgPuYn]:checked").val()!=""&&$(this).find("input[name^=extGrbgPuYn]:checked").val()!=undefined?$(this).find("input[name^=extGrbgPuYn]:checked").val():"N",dsbRddListStr:$(this).find("input[name^=extIstHopeDate]").data("disableHopeDay")};orderExtraInfo.push(extra);if($("input[name=rdoDeliveryMethod]").length>0&&$("input[name=rdoDeliveryMethod]").val()=="20")$(this).find("input[name=orderDeliveryMethod]").val("20");
else if($("#deliveryTab5").hasClass("on"))$(this).find("input[name=orderDeliveryMethod]").val("30");var selDlvrMemo=$(this).find("input[name=odrDeliveryMsg]").is(":visible")?$(this).find("input[name=odrDeliveryMsg]").val():$(this).find("button[name=odrDeliveryMsg]").text();if(_ORDER_DELIVERY_DEFAULT_MSG==selDlvrMemo)selDlvrMemo="";var dlvra={dlvraIndex:dlvraIndex++,adrsNm:arrMultiMemberAddr[0],adrsMobile:arrMultiMemberAddr[1],adrsTel:arrMultiMemberAddr[2],postNoNew:arrMultiMemberAddr[3],roadAddr:arrMultiMemberAddr[4],
roadDtlAddr:arrMultiMemberAddr[5],postNoOld:arrMultiMemberAddr[6],prclAddr:arrMultiMemberAddr[7],prclDtlAddr:arrMultiMemberAddr[8],dlvrMemo:selDlvrMemo,localPostYn:$(this).find("input[name=localPostYn]").val(),ordDlvrMtdCd:$(this).find("input[name=orderDeliveryMethod]").val(),cartInfoStr:JSON.stringify(orderCartInfo),extraInfoStr:JSON.stringify(orderExtraInfo),rddSearchGoodsListStr:orderRdd.setRddSearchGoodsList($(this).find("input[name^=extIstHopeDate]"))};if(orderCommon.stGbCd=="10"){dlvra.mbrDlvraNo=
$(this).find("input[name=multiMemberAddressMbrDlvraNo]").val();dlvra.dlvrMsgNo=$(this).find("input[name=dlvrMsgNo]").val();if($(this).find("input[name=dlvrMsgNo]").val()=="07")dlvra.dlvrMsgEtc=selDlvrMemo;else dlvra.dlvrMsgEtc=""}_orderDlvrInfo.push(dlvra)});return _orderDlvrInfo},getOrderNo:function(payMeansCd){var orderDlvrInfo=orderPay.getOrderDlvrInfo();_orderData=new Array;_orderData.push({name:"mbrNo",value:$("input[name=mbrNo]").val()});_orderData.push({name:"ordNm",value:$("input[name=ordNm]").val()});
_orderData.push({name:"ordrId",value:$("input[name=ordrId]").val()});_orderData.push({name:"mbrGrdCd",value:$("input[name=mbrGrdCd]").val()});_orderData.push({name:"ordrMobile",value:$("input[name=ordrMobile]").val()});_orderData.push({name:"ordrTel",value:$("input[name=ordrTel]").val()});_orderData.push({name:"ordrEmail",value:$("input[name=ordrEmail]").val()});_orderData.push({name:"cartTpCd",value:$("input[name=cartTpCd]").val()});$.each(orderCommon.arrGoodsInfo,function(index,item){_orderData.push({name:"cartIds",
value:item.cartId});_orderData.push({name:"goodsNms",value:item.goodsNm});_orderData.push({name:"goodsInfos",value:item.goodsId+"|"+item.buyQty})});$("input[name=goodsCpInfos]").each(function(index,item){if(item.defaultValue!=""&&item.defaultValue.length>0)_orderData.push({name:"cpInfos",value:item.defaultValue})});$("input[name=frbInfos]").each(function(index,item){if(item.defaultValue!=""&&item.defaultValue.length>0)_orderData.push({name:"frbInfos",value:item.defaultValue})});if($("#omniCpInfo").val()!=
null)_orderData.push({name:"omniCpInfo",value:$("#omniCpInfo").val()});_orderData.push({name:"payMeansCd",value:$("#payMeansCd").val()});var mbrUseTypeCd=$("#membershipUseTypeCd").val();if(mbrUseTypeCd==3)$("#membershipPointUseType"+mbrUseTypeCd).find("input[name=membershipPntInfos]").each(function(index,item){if(item.defaultValue!=""&&item.defaultValue.length>0)_orderData.push({name:"membershipPntInfos",value:item.defaultValue})});else if(mbrUseTypeCd==4)$("#membershipPointUseType"+mbrUseTypeCd).find("input[name=membershipPntInfos]").each(function(index,
item){if(item.defaultValue!=""&&item.defaultValue.length>0)_orderData.push({name:"membershipPntInfos",value:item.defaultValue})});_orderData.push({name:"mbrUseTypeCd",value:mbrUseTypeCd});_orderData.push({name:"svmnUseAmt",value:$("#order_payment_dc_svmn_use_amt").val()});_orderData.push({name:"savedPoint",value:$("#order_payment_total_save_amt").val()});_orderData.push({name:"savedUseMembershipPoint",value:$("#order_payment_membership_save_amt").val()});var svmnUseTypeCd=$("#svmnUseTypeCd").val();
_orderData.push({name:"svmnUseTypeCd",value:svmnUseTypeCd});var isExcludedJickpan=$("#isExcludedJickpan").val();_orderData.push({name:"isExcludedJickpan",value:isExcludedJickpan});_orderData.push({name:"thirdMembershipYn",value:$("#thirdMembershipYn").val()=="Y"?$("#thirdMembershipYn").val():"N"});$("#pointUseType"+svmnUseTypeCd).find("input[name=fndDayPntInfos]").each(function(index,item){if(item.defaultValue!=""&&item.defaultValue.length>0)_orderData.push({name:"fndDayPntInfos",value:item.defaultValue})});
$("#pointUseType"+svmnUseTypeCd).find("input[name=spclPntInfos]").each(function(index,item){if(item.defaultValue!=""&&item.defaultValue.length>0)_orderData.push({name:"spclPntInfos",value:item.defaultValue})});$("#pointUseType"+svmnUseTypeCd).find("input[name=awrdPntInfos]").each(function(index,item){if(item.defaultValue!=""&&item.defaultValue.length>0)_orderData.push({name:"awrdPntInfos",value:item.defaultValue})});$("#pointUseType"+svmnUseTypeCd).find("input[name=moscPntInfos]").each(function(index,
item){if(item.defaultValue!=""&&item.defaultValue.length>0)_orderData.push({name:"moscPntInfos",value:item.defaultValue})});$("#pointUseType"+svmnUseTypeCd).find("input[name=welfarePntInfos]").each(function(index,item){if(item.defaultValue!=""&&item.defaultValue.length>0)_orderData.push({name:"welfarePntInfos",value:item.defaultValue})});$("div.buy-target-goods").each(function(idx,element){_orderData.push({name:"additionalFnSprtAmt",value:$(element).attr("data-additional-fn-sprt-amt")})});_orderData.push({name:"excptNo",
value:$("#excptNo").val()});_orderData.push({name:"acctInfoNo",value:$("select[name=acctInfoNo]").val()});_orderData.push({name:"dpstrNm",value:$("input[name=dpstrNm]").val()});_orderData.push({name:"useGbCd",value:$("input:radio[name=useGbCd]:checked").val()});_orderData.push({name:"isuMeansNoPhn",value:$("input[name=isuMeansNoPhn]").val()});_orderData.push({name:"isuMeansNoBiz",value:$("input[name=isuMeansNoBiz]").val()});_orderData.push({name:"payAmt",value:$("input[name=payAmt]").val()});_orderData.push({name:"orderDlvrInfoStr",
value:JSON.stringify(orderDlvrInfo)});_orderData.push({name:"dlvraType",value:$("#dlvraType").val()==undefined||$("#dlvraType").val()==""?"1":$("#dlvraType").val()});_orderData.push({name:"onlineStoreOnlyYn",value:$("#onlineStoreOnlyYn").val()});_orderData.push({name:"rglrDlvrYn",value:$("input[name=rglrDlvrYn]").val()});_orderData.push({name:"rglrDlvrCycl",value:$("input[name=rglrDlvrCycl]").val()});_orderData.push({name:"rglrPayDay",value:$('input[name="subRglrPayDay"]').val()});$("input[name=maker ]").each(function(idx,
element){_orderData.push({name:"maker",value:$(element).val()})});$("input[name=model ]").each(function(idx,element){_orderData.push({name:"model",value:$(element).val()})});$("input[name=modelName ]").each(function(idx,element){_orderData.push({name:"modelName",value:$(element).val()})});$("input[name=modelSeries ]").each(function(idx,element){_orderData.push({name:"modelSeries",value:$(element).val()})});$("input[name=releaseDate ]").each(function(idx,element){_orderData.push({name:"releaseDate",
value:$(element).val()})});$("input[name=fgUse ]").each(function(idx,element){_orderData.push({name:"fgUse",value:$(element).val()})});$("input[name=addCmpAmt ]").each(function(idx,element){_orderData.push({name:"addCmpAmt",value:$(element).val()})});$("input[name=proNum ]").each(function(idx,element){_orderData.push({name:"proNum",value:$(element).val()})});$("input[name=trdGoodsId ]").each(function(idx,element){_orderData.push({name:"trdGoodsId",value:$(element).val()})});_orderData.push({name:"tradeInYn",
value:$("input[id=tradeInYn]").val()});_orderData.push({name:"galaxyClubYn",value:$("input[id=galaxyClubYn]").val()});_orderData.push({name:"cpDcAmtForFree",value:$("#cpDcAmtForFree").val()});_orderData.push({name:"isHomeclassGoodsYn",value:$("#isHomeclassGoodsYn").val()});_orderData.push({name:"isHomefitnessPrivateGoodsYn",value:$("#isHomefitnessPrivateGoodsYn").val()});_orderData.push({name:"winePckUpYn",value:$("input[id=winePckUpYn]").val()});var ceTrdCheckYN=$("input[class=ceTrdCheckY]:checked").val();
if(ceTrdCheckYN=="Y")_orderData.push({name:"ceTrdYn",value:"Y"});if(ceTrdCheckYN==""||ceTrdCheckYN=="undefined")_orderData.push({name:"ceTrdYn",value:"N"});_orderData.push({name:"presentYn",value:$("input[id=presentYn]").val()});_orderData.push({name:"carePlusYn",value:$("input[id=carePlusYn]").val()});_orderData.push({name:"carePlusTp",value:$("input[id=carePlusTp]").val()});_orderData.push({name:"isMuhanDojeonApplied",value:$("input[id=isMuhanDojeonApplied]").val()});_orderData.push({name:"storeSaleYn",
value:$("#storeSaleYn").val()});_orderData.push({name:"dlvrPckStrYn",value:$("#deliveryPickupStoreYn").val()});_orderData.push({name:"plazaRsvYn",value:$("#plazaRsvYn").val()});_orderData.push({name:"mdlCode",value:$("#mdlOmsCode").val()});if(orderCommon.stId=="471"&&$("#dvmGoodsYn").val()=="Y")_orderData.push({name:"dvmGoodsId",value:$("#dvmGoodsId").val()});_orderData.push({name:"wtyExtYn",value:$("#wtyExtYn").val()});if(typeof def_page_guid!="undefined")_orderData.push({name:"pageGuid",value:def_page_guid});
var qookerListObj=$(".cartListRst");var qookerCartTpCd="";var qookerYn="N";if(qookerListObj.length>0)$(qookerListObj).each(function(idx,element){qookerCartTpCd=$(this).attr("data-cart-tp-cd");if(qookerCartTpCd=="40")qookerYn="Y"});if($("#instoreYn").val()=="Y"){_orderData.push({name:"instoreYn",value:$("#instoreYn").val()});_orderData.push({name:"estmNo",value:$("#estmNo").val()})}_orderData.push({name:"stInclYn",value:$("#stInclYn").val()});var orderCompDlvrStr=orderPay.getDlvrAmtData();if(qookerYn!=
null&&qookerYn!="undefined"&&qookerYn=="Y"){_orderData.push({name:"qookerYn",value:qookerYn});_orderData.push({name:"orderCompDlvrStr",value:JSON.stringify(orderCompDlvrStr)})}_orderData.push({name:"divPayRegYn",value:$("#divPayRegYn").val()});console.dir(_orderData);if(orderCommon.stGbCd==orderCommon.ST_GB_10||orderCommon.stGbCd==orderCommon.ST_GB_20||orderCommon.stGbCd==orderCommon.ST_GB_30||orderCommon.stGbCd==orderCommon.ST_GB_50||orderCommon.stGbCd==orderCommon.ST_GB_70||orderCommon.stGbCd==
orderCommon.ST_GB_80)if(__history!=null&&__history.length>0)_orderData.push({name:"rddListStr",value:JSON.stringify(__history)});_orderData.push({name:"rsctRddYn",value:$("#rsctRddYn").val()});if(false){var popupWidth=500;var popupHeight=600;var popupX=document.body.offsetWidth/2-popupWidth/2;var popupY=window.screen.height/2-popupHeight/2;var popOptions="width="+popupWidth+", height="+popupHeight+", top="+popupY+", left="+popupX+", fullscreen=no, menubar=no, status=no, toolbar=no, titlebar=no, location=no, scrollbar=no";
pgPopup=window.open("","pgPopup",popOptions);mobilPay.open()}else{var d=new Date;var tmpNo=d.getFullYear()+""+(d.getMonth()+1)+""+d.getDate()+""+d.getHours()+""+d.getMinutes()+""+d.getSeconds()+""+Math.floor(Math.random()*1E3);var url;if($("#instoreYn").val()=="Y"&&$("#estmNo").val()!=null)url=orderCommon.stContextPath+"xhr/order/insertOrderTempInstore?tmpNo="+tmpNo+"&multiGoodsOrderYn="+(typeof _multi_goods_order=="undefined"?"N":_multi_goods_order);else url=orderCommon.stContextPath+"xhr/order/insertOrderTemp?tmpNo="+
tmpNo+"&multiGoodsOrderYn="+(typeof _multi_goods_order=="undefined"?"N":_multi_goods_order);var options={url:url,data:_orderData,beforeSend:function(xhr){xhr.setRequestHeader("Cache-Control","no-cache");xhr.setRequestHeader("Pragma","no-cache")},done:function(data){if(data.ordNo!="")if(data.ordQtyPlcyFlag=="S"){$("#order_payment_ord_no").val(data.ordNo);var rglrDlvrNo=data.rglrDlvrNo;if(rglrDlvrNo!=""&&rglrDlvrNo!=undefined)$("#rglrDlvrNo").val(data.rglrDlvrNo);var childSid=data.childSidList;var childSidHtml=
"";var childAmtHtml="";$("#divChildSidInfos").html(childSidHtml);$("#divChildAmtInfos").html(childAmtHtml);if(childSid!=""&&childSid!=undefined)for(var i in childSid)if(childSid[i].childStrId!=""&&childSid[i].childStrId!=undefined){childSidHtml+='<input type="hidden" name="childSidInfos" value="'+childSid[i].childStrId+'">';if($("#multiTaxYn").val()==="Y")childSidHtml+='<input type="hidden" name="childQookerInfos" value="'+childSid[i].tax+":"+childSid[i].taxFree+":"+childSid[i].supplyValue+":"+childSid[i].realDlvrcAmt+
'">';childAmtHtml+='<input type="hidden" name="childAmtInfos" value="'+childSid[i].saleAmt+'">'}$("#divChildSidInfos").html(childSidHtml);$("#divChildAmtInfos").html(childAmtHtml);var chrgDcStrId="";var chrgDcRate="";var longNoItrstYn="";$.each($("div.buy-target-goods"),function(idx,element){chrgDcStrId=$(element).find("input[name=goodsChrgDcStrId]").val();chrgDcRate=$(element).find("input[name=goodsChrgDcRate]").val();longNoItrstYn=$(element).find("input[name=goodsLongNoItrstYn]").val()});if(chrgDcStrId!=
undefined&&chrgDcStrId!=""&&(chrgDcRate!=undefined&&chrgDcRate!="")){$("#chrgDcYn").val("Y");$("#chrgDcRate").val(chrgDcRate);$("#longNoItrstYn").val(longNoItrstYn)}if($("#omniCpInfo").val()!=null&&$("#omniCpInfo").val()!=""){$("#nonCertificationCardYn").val("Y");$("#divChildSidInfos").html("");$("#divChildAmtInfos").html("")}else $("#nonCertificationCardYn").val("N");orderPay.module(data)}else{if(data.ordQtyPlcyMsg!=""&&data.ordQtyPlcyMsg!=undefined)commonAlert({title:"alert",content:data.ordQtyPlcyMsg});
else commonAlert({title:"alert",content:"援щℓ �쒗븳 珥덇낵�낅땲��.<br/>議곌굔�� �뺤씤�섏떊 �� �ㅼ떆 二쇰Ц�� 二쇱꽭��."});openLayer("commonAlert");localStorage.setItem("ing","N")}else{commonAlert({title:"alert",content:"二쇰Ц�앹꽦�� �ㅻ쪟媛� 諛쒖깮�덉뒿�덈떎. �ㅼ떆 �쒕룄�� 二쇱꽭��."});openLayer("commonAlert");localStorage.setItem("ing","N")}},fail:function(data){localStorage.setItem("ing","N")}};ajax.call(options)}},module:function(data){var isHomeclassGoodsYn=$("#isHomeclassGoodsYn").val();var payMeansCd=$("#payMeansCd").val();var totalPayAmt=parseInt($("input[name=payAmt]").val());
var carePlusMvD2cYn=$("input[name='carePlusMvD2cYn']").val();var divPayRegYn=$("input[name='divPayRegYn']").val();if(totalPayAmt<1){$("#payMeansCd").val("");this.complete()}else if(data.payOveYN=="Y")this.complete();else if("Y"===carePlusMvD2cYn)setTimeout(function(){orderPay.complete()},200);else if("Y"===divPayRegYn)if(mobilPay.dividePayRegistrationStd())setTimeout(function(){orderPay.complete()},200);else{commonAlert({title:"alert",content:"�섎닎寃곗젣 �깅줉�� �ㅽ뙣�섏��듬땲��. �ㅼ떆 �쒕룄�� 二쇱꽭��."});openLayer("commonAlert");
localStorage.setItem("ing","N")}else if(payMeansCd==orderCommon.CONST_PAY_MEANS_110||payMeansCd==orderCommon.CONST_PAY_MEANS_140||payMeansCd==orderCommon.CONST_PAY_MEANS_130||payMeansCd==orderCommon.CONST_PAY_MEANS_210||payMeansCd==orderCommon.CONST_PAY_MEANS_220||payMeansCd==orderCommon.CONST_PAY_MEANS_230||payMeansCd==orderCommon.CONST_PAY_MEANS_240||payMeansCd==orderCommon.CONST_PAY_MEANS_250||payMeansCd==orderCommon.CONST_PAY_MEANS_260||payMeansCd==orderCommon.CONST_PAY_MEANS_270){if(payMeansCd==
orderCommon.CONST_PAY_MEANS_110&&$("#rdCardType02").length>0)$("#nonCertificationCardYn").val($("#rdCardType02").is(":checked")?"Y":"N");var popupWidth=500;var popupHeight=600;var popupX=document.body.offsetWidth/2-popupWidth/2;var popupY=window.screen.height/2-popupHeight/2;var popOptions="width="+popupWidth+", height="+popupHeight+", top="+popupY+", left="+popupX+", fullscreen=no, menubar=no, status=no, toolbar=no, titlebar=no, location=no, scrollbar=no";pgPopup=window.open("","pgPopup",popOptions);
mobilPay.open()}else{var popupWidth=500;var popupHeight=600;var popupX=document.body.offsetWidth/2-popupWidth/2;var popupY=window.screen.height/2-popupHeight/2;var popOptions="width="+popupWidth+", height="+popupHeight+", top="+popupY+", left="+popupX+", fullscreen=no, menubar=no, status=no, toolbar=no, titlebar=no, location=no, scrollbar=no";pgPopup=window.open("","pgPopup",popOptions);mobilPay.open()}},complete:function(){var formdata=new Array;var recentPayInfoYn="N";formdata.push({name:"ordNo",
value:$("input[name=ordNo]").val()});$.each(orderCommon.arrGoodsInfo,function(index,item){formdata.push({name:"cartIds",value:item.cartId})});formdata.push({name:"cartTpCd",value:$("input[name=cartTpCd]").val()});if($("#pay-tab-view-sspay").is(":visible"))recentPayInfoYn=$("input[name=saveSamsungPay]").is(":checked")?"Y":"N";else if($("#pay-tab-view-card").is(":visible"))recentPayInfoYn=$("input[name=savePay]").is(":checked")?"Y":"N";else if($("#pay-tab-view-easy").is(":visible"))recentPayInfoYn=
$("input[name=saveEasyPay]").is(":checked")?"Y":"N";else if($("#pay-tab-view-vacct").is(":visible"))recentPayInfoYn=$("input[name=saveVirCashPay]").is(":checked")?"Y":"N";else if($("#pay-tab-view-racct").is(":visible"))recentPayInfoYn=$("input[name=saveRealCashPay]").is(":checked")?"Y":"N";if(orderCommon.stGbCd===orderCommon.ST_GB_10&&$("#qookerYn").val()!=="Y")recentPayInfoYn=$("input[name=saveSamsungPay]").is(":checked")?"Y":"N";formdata.push({name:"payMeansCd",value:$("#payMeansCd").val()});formdata.push({name:"payAmt",
value:$("input[name=payAmt]").val()});formdata.push({name:"acctInfoNo",value:$("select[name=acctInfoNo]").val()});formdata.push({name:"dpstrNm",value:$("input[name=dpstrNm]").val()});formdata.push({name:"mobilPayStdCertifyInfo",value:$("input[name=mobilPayStdCertifyInfo]").val()});formdata.push({name:"recentPayInfoYn",value:recentPayInfoYn});formdata.push({name:"selectCardCode",value:$("#selectCardCode").val()});var svmnUseTypeCd=$("#svmnUseTypeCd").val();formdata.push({name:"svmnUseTypeCd",value:svmnUseTypeCd});
$("input[name=goodsCpInfos]").each(function(index,item){if(item.defaultValue!=""&&item.defaultValue.length>0)formdata.push({name:"cpInfos",value:item.defaultValue})});formdata.push({name:"savedPoint",value:$("#order_payment_total_save_amt").val()});formdata.push({name:"savedUseMembershipPoint",value:$("#order_payment_membership_save_amt").val()});$("#pointUseType"+svmnUseTypeCd).find("input[name=fndDayPntInfos]").each(function(index,item){if(item.defaultValue!=""&&item.defaultValue.length>0)formdata.push({name:"fndDayPntInfos",
value:item.defaultValue})});$("#pointUseType"+svmnUseTypeCd).find("input[name=spclPntInfos]").each(function(index,item){if(item.defaultValue!=""&&item.defaultValue.length>0)formdata.push({name:"spclPntInfos",value:item.defaultValue})});$("#pointUseType"+svmnUseTypeCd).find("input[name=awrdPntInfos]").each(function(index,item){if(item.defaultValue!=""&&item.defaultValue.length>0)formdata.push({name:"awrdPntInfos",value:item.defaultValue})});$("#pointUseType"+svmnUseTypeCd).find("input[name=moscPntInfos]").each(function(index,
item){if(item.defaultValue!=""&&item.defaultValue.length>0)formdata.push({name:"moscPntInfos",value:item.defaultValue})});$("#pointUseType"+svmnUseTypeCd).find("input[name=welfarePntInfos]").each(function(index,item){if(item.defaultValue!=""&&item.defaultValue.length>0)formdata.push({name:"welfarePntInfos",value:item.defaultValue})});formdata.push({name:"thirdMembershipYn",value:$("#thirdMembershipYn").val()=="Y"?$("#thirdMembershipYn").val():"N"});$("div.buy-target-goods").each(function(idx,element){formdata.push({name:"additionalFnSprtAmt",
value:$(element).attr("data-additional-fn-sprt-amt")})});formdata.push({name:"onlineStoreOnlyYn",value:$("#onlineStoreOnlyYn").val()});formdata.push({name:"rglrDlvrYn",value:$("input[name=rglrDlvrYn]").val()});if($("input[name=rglrDlvrYn]").val()=="Y")_orderData.push({name:"mobilPayStdCertifyInfo",value:$("input[name=mobilPayStdCertifyInfo]").val()});if($("#order-recieve-view").length>0)formdata.push({name:"dlvrPckStrYn",value:"Y"});else formdata.push({name:"dlvrPckStrYn",value:"N"});formdata.push({name:"cpDcAmtForFree",
value:$("#cpDcAmtForFree").val()});if($("#isHomefitnessPrivateGoodsYn").val()=="Y")formdata.push({name:"lctNoList",value:$("#lctNoList").val()});if($("#galaxyClubYn").val()=="Y")formdata.push({name:"galaxyClubYn",value:$("#galaxyClubYn").val()});var ceTrdCheckYN=$("input[class=ceTrdCheckY]:checked").val();if(ceTrdCheckYN=="Y")formdata.push({name:"ceTrdYn",value:"Y"});if(ceTrdCheckYN==""||ceTrdCheckYN=="undefined")formdata.push({name:"ceTrdYn",value:"N"});if($("#wtyExtYn").val()=="Y")formdata.push({name:"wtyExtYn",
value:$("#wtyExtYn").val()});if((orderCommon.stId=="1"||orderCommon.stId=="122")&&$("#deliveryPickupStoreYn").val()=="Y")if($("#agreement-25").val("input[id=agreement-25]").is(":checked")===true)formdata.push({name:"agmtPckupYn",value:"Y"});else formdata.push({name:"agmtPckupYn",value:"N"});formdata.push({name:"iotOrderYn",value:$("#iotOrderYn").val()});formdata.push({name:"carePlusYn",value:$("input[name=carePlusYn]").val()});formdata.push({name:"carePlusTp",value:$("input[name=carePlusTp]").val()});
formdata.push({name:"linkSubCd",value:$("input[name=linkSubCd]").val()});formdata.push({name:"careplusPrevAdrsNm",value:$("input[name=careplusPrevAdrsNm]").val()});formdata.push({name:"careplusPrevAdrsMobile",value:$("input[name=careplusPrevAdrsMobile]").val()});formdata.push({name:"careplusPrevGbNm",value:$("input[name=careplusPrevGbNm]").val()});formdata.push({name:"careplusPrevPostNoNew",value:$("input[name=careplusPrevPostNoNew]").val()});formdata.push({name:"careplusPrevRoadAddr",value:$("input[name=careplusPrevRoadAddr]").val()});
formdata.push({name:"careplusPrevRoadDtlAddr",value:$("input[name=careplusPrevRoadDtlAddr]").val()});formdata.push({name:"winePckUpYn",value:$("input[name=winePckUpYn]").val()});formdata.push({name:"englstStr",value:JSON.stringify(__englst)});formdata.push({name:"schlstStr",value:JSON.stringify(__schlst)});formdata.push({name:"presentYn",value:$("input[name=presentYn]").val()});formdata.push({name:"istHopeTime",value:$("input[name=exIstHopeTime]").val()});if($("input[name=presentYn]").val()=="Y"){formdata.push({name:"prsntSndTpCd",
value:$("input[name=prsntSndTpCd]").val()});formdata.push({name:"sndrNm",value:$("input[name=presentSndrNm]").val()});formdata.push({name:"adrsNm",value:$("input[name=adrsNm]").val()});formdata.push({name:"adrsMobile",value:$("input[name=adrsMobile]").val()});formdata.push({name:"prsntMsg",value:$("input[name=presentPrsntMsg]").val()});formdata.push({name:"tmplNo",value:$("input[name=presentTmplNo]").val()})}var goodsMid1Obj=$("input[name=goodsMid1]")[0];var sidIstmPrdObj=$("input[name=goodsSidIstmPrd]")[0];
var midTpCdObj=$("input[name=goodsMidTpCd]")[0];formdata.push({name:"goodsMid1",value:$(goodsMid1Obj).val()});formdata.push({name:"sidIstmPrd",value:$(sidIstmPrdObj).val()});formdata.push({name:"midTpCd",value:$(midTpCdObj).val()});formdata.push({name:"cpMvD2cDist",value:$("input[name=cpMvD2cDist]").val()});formdata.push({name:"dlvraType",value:$("#dlvraType").val()==undefined||$("#dlvraType").val()==""?"1":$("#dlvraType").val()});if($("#instoreYn").val()=="Y"){formdata.push({name:"instoreYn",value:$("#instoreYn").val()});
formdata.push({name:"estmNo",value:$("#estmNo").val()})}formdata.push({name:"stInclYn",value:$("#stInclYn").val()});formdata.push({name:"iotDcAmtSt",value:$("#iotDcAmtSt").val()});if($("#timeDlvrYn").val()==="Y")formdata.push({name:"erpStockGoodsListStr",value:JSON.stringify(__erpStockGoodsList)});formdata.push({name:"plazaRsvYn",value:$("#plazaRsvYn").val()});formdata.push({name:"divPayRegYn",value:$("#divPayRegYn").val()});console.dir(formdata);console.dir(_orderData);var options={url:orderCommon.stContextPath+
"xhr/order/insertOrderComplete",data:formdata,done:function(data){if(data.resultCode=="S"){if(orderCommon.ST_GB_10===orderCommon.stGbCd)orderGa.GA4CheckoutProgress();var utmUrl=window.location.search;if($("#divPayRegYn").val()==="Y")$("#order_payment_form").attr("action",orderCommon.stContextPath+"order/divpay/indexOrderCompletionDivPayReg/");else if(utmUrl.includes("_gl"))$("#order_payment_form").attr("action",orderCommon.stContextPath+"order/indexOrderCompletion/"+utmUrl);else $("#order_payment_form").attr("action",
orderCommon.stContextPath+"order/indexOrderCompletion/");$("#order_payment_form").attr("target","_self");$("#order_payment_form").attr("method","post");$("#order_payment_form").submit()}else{if(orderCommon.ST_GB_10===orderCommon.stGbCd)orderGa.GA4PaymentFail();commonAlert({title:"alert",content:data.resultMsg});openLayer("commonAlert");localStorage.setItem("ing","N");return}},fail:function(){localStorage.setItem("ing","N");if(orderCommon.ST_GB_10===orderCommon.stGbCd)orderGa.GA4PaymentFail()}};ajax.call(options)},
fnetOrderAgree:function(){$("#fnetOrderAgree").val("Y");closeLayer("popupFmailyAgree")},getDlvrAmtData:function(){var qookerListObj=$(".cartListRst");var qookerCartTpCd="",qookerInfo="",qookerCartId="",qookerCompNo="",$pkgDlvrYn="",$pkgDlvrNo="",$pkgOrgDlvrAmt=0,$pkgAddDlvrAmt=0,$pkgDlvrAmt=0,$dlvrcCdtCd="",$dlvrcCdtStdCd="",$dlvrcPayMtdCd="",$dlvrcPlcNo="",$dlvrcStdCd="",$dlvrcBuyPrc="",$dlvrcBuyQty="",$dlvrcDlvrAmt="",$dlvrcAddDlvrAmt=0;var compNoArr=[];var compNoData;if(qookerListObj.length>0)$(qookerListObj).each(function(k,
v){qookerCartId=$(this).attr("data-cart-id");qookerCartTpCd=$(this).attr("data-cart-tp-cd");if(qookerCartTpCd=="40"){qookerInfo=$(this).find("div.order-price");qookerCompNo=$(this).attr("data-goods-comp-no");compNoData={cartId:qookerCartId,pkgDlvrYn:$(qookerInfo).find("input[name=pkgDlvrYn]").val(),pkgDlvrNo:$(qookerInfo).find("input[name=pkgDlvrNo]").val(),pkgOrgDlvrAmt:$(qookerInfo).find("input[name=pkgOrgDlvrAmt]").val(),pkgAddDlvrAmt:$(qookerInfo).find("input[name=pkgAddDlvrAmt]").val(),pkgDlvrAmt:$("#dlvrAmt_"+
qookerCompNo).val(),dlvrcCdtCd:$(qookerInfo).find("input[name=dlvrcCdtCd]").val(),dlvrcCdtStdCd:$(qookerInfo).find("input[name=dlvrcCdtStdCd]").val(),dlvrcPayMtdCd:$(qookerInfo).find("input[name=dlvrcPayMtdCd]").val(),dlvrcPlcNo:$(qookerInfo).find("input[name=dlvrcPlcNo]").val(),dlvrcStdCd:$(qookerInfo).find("input[name=dlvrcStdCd]").val(),dlvrcBuyPrc:$(qookerInfo).find("input[name=dlvrcBuyPrc]").val(),dlvrcBuyQty:$(qookerInfo).find("input[name=dlvrcBuyQty]").val(),dlvrcDlvrAmt:$(qookerInfo).find("input[name=dlvrcDlvrAmt]").val(),
dlvrcAddDlvrAmt:$(qookerInfo).find("input[name=dlvrcAddDlvrAmt]").val()};compNoArr.push(compNoData)}});return compNoArr},getBillComplete:function(getData){var options={url:orderCommon.stContextPath+"xhr/order/insertCareplusPayInfo",data:{data:getData.result,ordNo:getData.ordNo,isUpdateCardInfo:$("#isUpdateCardInfo").val()},done:function(data){localStorage.setItem("ing","N");$("#isUpdateCardInfo").val("N");$("#ordNo").val(getData.ordNo);$("#payToken").val(getData.payToken);var _cancelData=new Array;
_cancelData.push({name:"ordNo",value:getData.ordNo});_cancelData.push({name:"payToken",value:getData.payToken});var option={url:orderCommon.stContextPath+"careplusCardPayCancel/",type:"POST",data:_cancelData,done:function(result){var compMsg=result.message;if(result.code=="0000"){commonAlert({title:"alert",content:compMsg});openLayer("commonAlert")}setTimeout(function(){window.location.reload()},1E3)}};ajax.call(option)},fail:function(){localStorage.setItem("ing","N")}};ajax.call(options)},removePayInfo:function(data){console.log(">>> in removePayInfo?");
console.log(orderCommon.stContextPath+"xhr/order/removeCareplusPayInfo");console.log(data);var options={url:orderCommon.stContextPath+"xhr/order/removeCareplusPayInfo",data:{data:data},done:function(data){commonAlert({title:"alert",content:data.message});openLayer("commonAlert");localStorage.setItem("ing","N")},fail:function(){localStorage.setItem("ing","N")}};ajax.call(options);orderPay.getOrderNo(this)},cancelCardPay:function(data){var _cancelData=new Array;_cancelData.push({name:"ordNo",value:data.ordNo});
_cancelData.push({name:"payToken",value:data.payToken});console.log(data.payToken);console.log(data.ordNo);var option={url:orderCommon.stContextPath+"careplusCardPayCancel/",type:"POST",data:_cancelData,done:function(result){alert("ghhhhgg");window.location.reload()}};ajax.call(option)}};